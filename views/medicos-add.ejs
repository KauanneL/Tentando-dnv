<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Cadastro de Médicos</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.min.js"></script>

    <script>
        $(document).ready(function () {

            // ativa select2
            $(".select2").select2({
                placeholder: "(Informe)",
                width: "100%"
            });

            function getEspecialidade() {
                $.ajax({
                    url: "/especialidades/preenche-select",
                    type: "GET",
                    dataType: "json",
                    success: function (res) {
                        $("#inputEspecialidade").empty();
                        $.each(res.resultado, function (key, value) {
                            $("#inputEspecialidade").append(
                                "<option value='" + value.id_especialidade + "'>"
                                + value.nome +
                                "</option>"
                            );
                        });
                    }
                });
            }

            getEspecialidade();
        });
    </script>
</head>

<body>
    <h1>Cadastro de Médicos</h1>

    <form method="post" action="/medicos/add" class="row g-3">

        <div class="col-md-6">
            <label for="inputNome" class="form-label">Nome</label>
            <input type="text" class="form-control" id="inputNome" name="nome" required>
        </div>

        <div class="col-md-6">
            <label for="inputCRM" class="form-label">CRM</label>
            <input type="text" class="form-control" id="inputCRM" name="crm" required>
        </div>

        <div class="col-md-6">
            <label for="inputTelefone" class="form-label">Telefone</label>
            <input type="text" class="form-control" id="inputTelefone" name="telefone">
        </div>

        <div class="col-md-6">
            <label for="inputEmail" class="form-label">Email</label>
            <input type="email" class="form-control" id="inputEmail" name="email">
        </div>

        <div class="col-md-6">
            <label class="form-label">Especialidade</label>
            <select id="inputEspecialidade"
                    name="especialidade"
                    class="form-select select2"
                    multiple>
            </select>
        </div>

        <div class="col-12">
            <button type="submit" class="btn btn-primary">Cadastrar</button>
            <a href="/medicos/listar" class="btn btn-secondary">Cancelar</a>
        </div>

    </form>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>